package com.leetcode.editor.cn;
//ä½ å°†è·å¾— K ä¸ªé¸¡è›‹ï¼Œå¹¶å¯ä»¥ä½¿ç”¨ä¸€æ ‹ä» 1 åˆ° N å…±æœ‰ N å±‚æ¥¼çš„å»ºç­‘ã€‚
//
// æ¯ä¸ªè›‹çš„åŠŸèƒ½éƒ½æ˜¯ä¸€æ ·çš„ï¼Œå¦‚æœä¸€ä¸ªè›‹ç¢äº†ï¼Œä½ å°±ä¸èƒ½å†æŠŠå®ƒæ‰ä¸‹å»ã€‚
//
// ä½ çŸ¥é“å­˜åœ¨æ¥¼å±‚ F ï¼Œæ»¡è¶³ 0 <= F <= N ä»»ä½•ä»é«˜äº F çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¼šç¢ï¼Œä» F æ¥¼å±‚æˆ–æ¯”å®ƒä½çš„æ¥¼å±‚è½ä¸‹çš„é¸¡è›‹éƒ½ä¸ä¼šç ´ã€‚
//
// æ¯æ¬¡ç§»åŠ¨ï¼Œä½ å¯ä»¥å–ä¸€ä¸ªé¸¡è›‹ï¼ˆå¦‚æœä½ æœ‰å®Œæ•´çš„é¸¡è›‹ï¼‰å¹¶æŠŠå®ƒä»ä»»ä¸€æ¥¼å±‚ X æ‰”ä¸‹ï¼ˆæ»¡è¶³ 1 <= X <= Nï¼‰ã€‚
//
// ä½ çš„ç›®æ ‡æ˜¯ç¡®åˆ‡åœ°çŸ¥é“ F çš„å€¼æ˜¯å¤šå°‘ã€‚
//
// æ— è®º F çš„åˆå§‹å€¼å¦‚ä½•ï¼Œä½ ç¡®å®š F çš„å€¼çš„æœ€å°ç§»åŠ¨æ¬¡æ•°æ˜¯å¤šå°‘ï¼Ÿ
//
//
//
//
//
//
// ç¤ºä¾‹ 1ï¼š
//
// è¾“å…¥ï¼šK = 1, N = 2
//è¾“å‡ºï¼š2
//è§£é‡Šï¼š
//é¸¡è›‹ä» 1 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œæˆ‘ä»¬è‚¯å®šçŸ¥é“ F = 0 ã€‚
//å¦åˆ™ï¼Œé¸¡è›‹ä» 2 æ¥¼æ‰è½ã€‚å¦‚æœå®ƒç¢äº†ï¼Œæˆ‘ä»¬è‚¯å®šçŸ¥é“ F = 1 ã€‚
//å¦‚æœå®ƒæ²¡ç¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šçŸ¥é“ F = 2 ã€‚
//å› æ­¤ï¼Œåœ¨æœ€åçš„æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦ç§»åŠ¨ 2 æ¬¡ä»¥ç¡®å®š F æ˜¯å¤šå°‘ã€‚
//
//
// ç¤ºä¾‹ 2ï¼š
//
// è¾“å…¥ï¼šK = 2, N = 6
//è¾“å‡ºï¼š3
//
//
// ç¤ºä¾‹ 3ï¼š
//
// è¾“å…¥ï¼šK = 3, N = 14
//è¾“å‡ºï¼š4
//
//
//
//
// æç¤ºï¼š
//
//
// 1 <= K <= 100
// 1 <= N <= 10000
//
// Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ åŠ¨æ€è§„åˆ’
// ğŸ‘ 525 ğŸ‘ 0

import java.util.Arrays;

public class P887SuperEggDrop {
    //leetcode submit region begin(Prohibit modification and deletion)
    class Solution {
        //        HashMap<HashMap<Integer, Integer>, Integer> memo = new HashMap<>();
        public int superEggDrop(int K, int N) {
//            int[][] dp = new int[N + 1][K + 1];
            // dp[i][j]ï¼šä¸€å…±æœ‰ i å±‚æ¥¼æ¢¯çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ j ä¸ªé¸¡è›‹çš„æœ€å°‘ä»çš„æ¬¡æ•°
            int[][] dp = new int[N + 1][K + 1];

            // åˆå§‹åŒ–
            for (int i = 0; i <= N; i++) {
                Arrays.fill(dp[i], i);
            }
            for (int j = 0; j <= K; j++) {
                dp[0][j] = 0;
            }

            dp[1][0] = 0;
            for (int j = 1; j <= K; j++) {
                dp[1][j] = 1;
            }
            for (int i = 0; i <= N; i++) {
                dp[i][0] = 0;
                dp[i][1] = i;
            }

            for (int i = 2; i <= N; i++) {
                for (int j = 2; j <= K; j++) {
                    // åœ¨åŒºé—´ [1, i] é‡Œç¡®å®šä¸€ä¸ªæœ€ä¼˜å€¼
                    int left = 1;
                    int right = i;
                    while (left < right) {
                        // æ‰¾ dp[k - 1][j - 1] <= dp[i - mid][j] çš„æœ€å¤§å€¼ k
                        int mid = left + (right - left + 1) / 2;

                        int breakCount = dp[mid - 1][j - 1];
                        int notBreakCount = dp[i - mid][j];
                        if (breakCount > notBreakCount) {
                            // æ’é™¤æ³•ï¼ˆå‡æ²»æ€æƒ³ï¼‰å†™å¯¹äºŒåˆ†è§ç¬¬ 35 é¢˜ï¼Œå…ˆæƒ³ä»€ä¹ˆæ—¶å€™ä¸æ˜¯è§£
                            // ä¸¥æ ¼å¤§äºçš„æ—¶å€™ä¸€å®šä¸æ˜¯è§£ï¼Œæ­¤æ—¶ mid ä¸€å®šä¸æ˜¯è§£
                            // ä¸‹ä¸€è½®æœç´¢åŒºé—´æ˜¯ [left, mid - 1]
                            right = mid - 1;
                        } else {
                            // è¿™ä¸ªåŒºé—´ä¸€å®šæ˜¯ä¸Šä¸€ä¸ªåŒºé—´çš„åé¢ï¼Œå³ [mid, right]
                            // æ³¨æ„è¿™ä¸ªæ—¶å€™å–ä¸­é—´æ•°è¦ä¸Šå–æ•´ï¼Œint mid = left + (right - left + 1) / 2;
                            left = mid;
                        }
                    }
                    // left è¿™ä¸ªä¸‹æ ‡å°±æ˜¯æœ€ä¼˜çš„ k å€¼ï¼ŒæŠŠå®ƒä»£å…¥è½¬ç§»æ–¹ç¨‹ Math.max(dp[k - 1][j - 1], dp[i - k][j]) + 1) å³å¯
                    dp[i][j] = Math.max(dp[left - 1][j - 1], dp[i - left][j]) + 1;
                }
            }
            return dp[N][K];
        }
    }
//leetcode submit region end(Prohibit modification and deletion)

}
